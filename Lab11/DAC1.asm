;When
;SW = 0, Staircase Waveform
;SW = 1, Triangular Waveform

SW EQU P2.0
WR EQU P0.7
ORG 00H

SETB SW
CLR WR

CHECK:	MOV C,SW
		JC TRIANG
START:	MOV A,#00
		MOV P2,A
		ACALL DELAY
RPT:	ADD A,#51	;FOR 5 STEPS
		MOV P1,A
		ACALL DELAY
		CJNE A,#255,RPT
		SJMP CHECK

TRIANG:	MOV A,#00
INCR:	MOV P1,A
		INC A
		CJNE A,#255,INCR
DECR:	MOV P1,A
		DEC A
		CJNE A,#00,DECR
		SJMP CHECK

DELAY:	MOV R2,#300
REPEAT:	DJNZ R2,REPEAT
		RET

END
		